# BooQuiz Backend

ì‹¤ì‹œê°„ ëŒ€ê·œëª¨ ì°¸ì—¬í˜• í€´ì¦ˆ í”Œë«í¼ BooQuizì˜ ë°±ì—”ë“œ ë ˆí¬ì§€í† ë¦¬ì…ë‹ˆë‹¤.

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

BooQuiz ë°±ì—”ë“œëŠ” NestJS ê¸°ë°˜ì˜ ì„œë²„ë¡œ, ì‹¤ì‹œê°„ í€´ì¦ˆ ì§„í–‰ì„ ìœ„í•œ WebSocket í†µì‹ ê³¼ í€´ì¦ˆ ê´€ë¦¬ë¥¼ ìœ„í•œ RESTful APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

-   WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ í€´ì¦ˆ ì§„í–‰
-   í€´ì¦ˆ/í€´ì¦ˆì…‹ CRUD
-   ì‹¤ì‹œê°„ ë‹µì•ˆ ì œì¶œ ë° ì±„ì 
-   ì„¸ì…˜ ê¸°ë°˜ í€´ì¦ˆì¡´ ê´€ë¦¬
-   300ëª… ì´ìƒ ë™ì‹œ ì ‘ì† ì§€ì›

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### í•µì‹¬ ê¸°ìˆ 

-   **Framework:** NestJS 10.0.0
-   **Language:** TypeScript 5.1.3
-   **Runtime:** Node.js
-   **WebSocket:** ws 8.18.0, @nestjs/websockets
-   **Database:**
    -   MySQL 2 (Production)
    -   SQLite3 (Development)
    -   TypeORM

### ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬

-   **ì„¤ì • ê´€ë¦¬:** @nestjs/config
-   **API ë¬¸ì„œí™”:** @nestjs/swagger 8.0.5
-   **ORM:**
    -   TypeORM 0.3.20
    -   typeorm-transactional
-   **Validation:**
    -   class-validator
    -   class-transformer
-   **ë¡œê¹…:**
    -   winston
    -   nest-winston

### ê°œë°œ ë„êµ¬

-   **í…ŒìŠ¤íŠ¸:**
    -   Jest
    -   supertest
    -   superwstest
-   **ì½”ë“œ í’ˆì§ˆ:**
    -   ESLint
    -   Prettier
-   **ë¹Œë“œ ë„êµ¬:** @nestjs/cli

## ğŸ— í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ common/              # ê³µí†µ ìœ í‹¸ë¦¬í‹° ë° ìƒìˆ˜
â”œâ”€â”€ core/               # í•µì‹¬ ê¸°ëŠ¥ (WebSocket ì–´ëŒ‘í„° ë“±)
â”œâ”€â”€ logger/             # ë¡œê¹… ì„¤ì •
â”œâ”€â”€ play/               # ì‹¤ì‹œê°„ í€´ì¦ˆ ì§„í–‰ ê´€ë ¨
â”‚   â”œâ”€â”€ dto/           # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”œâ”€â”€ entities/      # ì—”í‹°í‹° ì •ì˜
â”‚   â””â”€â”€ gateway/       # WebSocket ê²Œì´íŠ¸ì›¨ì´
â”œâ”€â”€ quiz/               # í€´ì¦ˆ ê´€ë¦¬
â”‚   â”œâ”€â”€ dto/           # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”œâ”€â”€ entity/        # ì—”í‹°í‹° ì •ì˜
â”‚   â””â”€â”€ repository/    # ë¦¬í¬ì§€í† ë¦¬ ê³„ì¸µ
â””â”€â”€ quiz-zone/          # í€´ì¦ˆì¡´ ê´€ë¦¬
    â”œâ”€â”€ dto/           # ë°ì´í„° ì „ì†¡ ê°ì²´
    â”œâ”€â”€ entities/      # ì—”í‹°í‹° ì •ì˜
    â””â”€â”€ repository/    # ë¦¬í¬ì§€í† ë¦¬ ê³„ì¸µ
```

## ğŸš€ ì‹œì‘í•˜ê¸°

1. í”„ë¡œì íŠ¸ í´ë¡ 

```bash
git clone https://github.com/boostcampwm-2024/web08-BooQuiz.git
```

2. pnpm ì„¤ì¹˜ (ì—†ëŠ” ê²½ìš°)

```bash
npm install -g pnpm
```

3. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pnpm install
```

4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
cp .env.example .env
```

5. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
pnpm start:dev
```

## ğŸ“¦ ìŠ¤í¬ë¦½íŠ¸

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
pnpm start:dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
pnpm build

# í”„ë¡œë•ì…˜ ì‹¤í–‰
pnpm start:prod

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pnpm test           # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
pnpm test:e2e      # E2E í…ŒìŠ¤íŠ¸
pnpm test:cov      # í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

# ë¦°íŠ¸ ë° í¬ë§·íŒ…
pnpm lint
pnpm format
```

## ğŸ“¡ API ë¬¸ì„œ

### REST API

-   Swagger UI: `http://localhost:3000/api`
-   API ë¬¸ì„œ: `http://localhost:3000/api-json`

### WebSocket ì´ë²¤íŠ¸

#### í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„

-   `join`: í€´ì¦ˆì¡´ ì…ì¥
-   `start`: í€´ì¦ˆ ì‹œì‘
-   `submit`: ë‹µì•ˆ ì œì¶œ
-   `leave`: í€´ì¦ˆì¡´ í‡´ì¥

#### ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸

-   `nextQuiz`: ë‹¤ìŒ ë¬¸ì œ ì •ë³´
-   `result`: ì œì¶œ ê²°ê³¼
-   `summary`: ìµœì¢… ê²°ê³¼
-   `finish`: í€´ì¦ˆ ì¢…ë£Œ

## ğŸ§ª í…ŒìŠ¤íŠ¸

í”„ë¡œì íŠ¸ëŠ” Jestë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì™€ E2E í…ŒìŠ¤íŠ¸ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
pnpm test

# E2E í…ŒìŠ¤íŠ¸
pnpm test:e2e

# íŠ¹ì • íŒŒì¼ í…ŒìŠ¤íŠ¸
pnpm test src/quiz/quiz.service.spec.ts
```

## ğŸ“ ê°œë°œ ê°€ì´ë“œë¼ì¸

### ì•„í‚¤í…ì²˜

-   ê³„ì¸µí˜• ì•„í‚¤í…ì²˜ (Controller â†’ Service â†’ Repository)
-   ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„ ì›ì¹™ ì¤€ìˆ˜
-   SOLID ì›ì¹™ ì ìš©

### ì½”ë“œ ìŠ¤íƒ€ì¼

-   ESLint/Prettier ì„¤ì • ì¤€ìˆ˜
-   NestJS ì½”ë”© ì»¨ë²¤ì…˜ ë”°ë¥´ê¸°
-   ëª…í™•í•œ íƒ€ì… ì •ì˜

### WebSocket í†µì‹ 

-   ì„¸ì…˜ ê¸°ë°˜ ì—°ê²° ê´€ë¦¬
-   ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ì²˜ë¦¬
-   ì—°ê²° ëŠê¹€ ëŒ€ì‘

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

-   ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦
-   WebSocket ì—°ê²° ê²€ì¦
-   ì…ë ¥ê°’ ê²€ì¦
-   SQL Injection ë°©ì§€
-   Rate Limiting

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. ì´ìŠˆ ìƒì„± ë˜ëŠ” ê¸°ì¡´ ì´ìŠˆ í™•ì¸
2. feature/[ê¸°ëŠ¥ëª…] ë¸Œëœì¹˜ ìƒì„±
3. ê°œë°œ ë° í…ŒìŠ¤íŠ¸ ì™„ë£Œ
4. PR ìƒì„± ë° ë¦¬ë·° ìš”ì²­
